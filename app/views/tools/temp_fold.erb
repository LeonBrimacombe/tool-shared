<div class="tool-show-container backing">
  <!-- Left Section: Tool Details -->
  <div class="tool-details">
    <% if @tool.user_id == current_user.id %>
      <%= link_to "Cancel listing", tool_path(@tool), data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this listing?" }, class: "btn-primary" %>
    <% end %>

    <div class="tool-info">
      <!-- Tool Image -->
      <% @tool.images.each do |image| %>
        <%= cl_image_tag image.key, height: 300, width: 400 %>
      <% end %>

      <!-- Tool Information -->
      <div class="tool-description">
        <h2><%= @tool.name %><span class="tool-price"><%= @tool.price %></span></h2>
        <p>Listed by <strong><%= @tool.user.username %></strong></p>
        <p>
          <strong>Description: </strong><%= @tool.description %>
          <br>
          <strong>Category:</strong><%= @tool.category %>
        </p>

        <!-- Collection Info -->
        <div class="collection-info">
          <div class="collection-address">
            <i class="bi bi-geo-alt-fill"></i>
            <p>
              <strong>COLLECTION ADDRESS</strong><br>
              <%= @tool.address %>
            </p>
          </div>
          <div class="collection-time">
            <i class="bi bi-clock-fill"></i>
            <p>
              <strong>COLLECTION DATES</strong><br>
              <strong>Available from</strong> <%= @tool.available_from %> <br>
              <strong>Available until</strong> <%= @tool.available_until %>
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="action-buttons">
      <% if @tool.user_id == current_user.id %>
        <%= link_to "Cancel listing", tool_path(@tool), data: {turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this listing?" }, class: "btn-primary" %>
        <%= link_to 'Edit Listing', edit_tool_path(@tool), class:"btn-primary"%>
      <% else %>
        <%= link_to 'Make Booking', new_tool_booking_path(@tool), class:"btn-primary"%>
        <%= link_to 'Contact lender', new_tool_booking_path(@tool), class:"btn-primary"%>
    </div>
  </div>

  <!-- Right Section: Map -->
  <div class="tool-map">
    <div style="width: 100%; height: 600px; border-radius: 10px; background-color: black;"
    data-controller="map"
    data-map-markers-value="<%= @markers.to_json %>"
    data-map-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>
  </div>
</div>
